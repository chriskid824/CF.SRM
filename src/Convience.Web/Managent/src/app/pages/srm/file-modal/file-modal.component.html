<ng-template #uploadTitleTpl>
  <span>{{soucedata.functionName}} : {{soucedata.number}}</span>
</ng-template>
<ng-template #uploadContentTpl>
  <!-- <nz-alert class="mb-10" nzType="warning" nzMessage="文件限製2m以下"></nz-alert> -->
  <!-- <nz-upload [(nzFileList)]="fileList" [nzBeforeUpload]="beforeUpload" nzSize="2048" nzLimit="1" *ngFor="let file of fileRecordList">

    <button nz-button><i nz-icon nzType="upload"></i>{{ file.typeName }} 選擇上載文件</button>
  </nz-upload> -->
  <!-- <nz-upload
  nzAction="https://www.mocky.io/v2/5cc8019d300000980a055e76"
  [nzHeaders]="{ authorization: 'authorization-text' }"
  (nzChange)="handleChange($event)"
  [nzFileList]="fileList"
  nzLimit="1" *ngFor="let file of fileRecordList"
>
  <button nz-button>
    <i nz-icon nzType="upload"></i>
    {{file.typeName}}Click to Upload
  </button>
</nz-upload> -->




<div nz-row [nzGutter]="16">
  <div nz-col [nzSpan]="12">
  <nz-form-item>
    <nz-form-label [nzSpan]="12">廠別</nz-form-label>
    <nz-form-control [ngSwitch]="soucedata.werks" [nzSpan]="12">
      <label *ngSwitchCase="1100">廠工事業處</label>
      <label *ngSwitchCase="1200">機械事業處</label>
      <label *ngSwitchCase="3100">精密事業處</label>
      <label *ngSwitchDefault></label>
    </nz-form-control>
  </nz-form-item>
  </div>
  <div nz-col [nzSpan]="12">
    <nz-form-item>
      <nz-form-label [nzSpan]="12">廠內/廠外</nz-form-label>
      <nz-form-control [nzSpan]="12">
        <label *ngIf="soucedata.type==1; else elseBlock">廠內</label>
        <ng-template #elseBlock><label>廠外</label></ng-template>
      </nz-form-control>
    </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12" *ngIf="soucedata.deadline">
      <nz-form-item>
        <nz-form-label [nzSpan]="12">截止日期</nz-form-label>
        <nz-form-control [nzSpan]="12">
          <label>{{soucedata.deadline|date:'yyyy-MM-dd'}}</label>
        </nz-form-control>
      </nz-form-item>
      </div>
</div>
<nz-divider nzOrientation="left" nzText="上傳檔案"></nz-divider>
<div nz-row [nzGutter]="16">
  <div nz-col [nzSpan]="12" *ngFor="let file of fileRecordList">
    <app-file-modal-filetype  [inputFile]="file" [isUpload]="isUpload" [inputFormData]="formData" (buttonClicked)="parentEventHandlerFunction($event)"></app-file-modal-filetype>
  </div>
</div>
</ng-template>
<ng-template #uploadFooterTpl>
  <button *canOperate="'UploadFilebtn'" nz-button [nzType]="'primary'" [nzLoading]="uploading" (click)="handleUpload()"
    [disabled]="!ischanged" style="margin-top: 16px">
    {{ uploading ? '上傳中...' : '開始上傳' }}
  </button>
</ng-template>

<ng-template #folderContentTpl>
  <form nz-form [formGroup]="folderForm" (ngSubmit)="submit()">
    <nz-form-item>
      <nz-form-label nzRequired="true" [nzSm]="6" [nzXs]="24" [nzFor]="'edit_folderName'">檔案夾名稱</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="errorTpl">
        <input [attr.id]="'edit_folderName'" formControlName="folderName" nz-input autocomplete="off"
          placeholder="檔案夾名稱" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control>
        <nz-form-control [nzSpan]="14" [nzOffset]="6">
          <button nz-button nzType="primary" class="mr-10">提交</button>
          <button nz-button type="button" (click)="cancel()">取消</button>
        </nz-form-control>
      </nz-form-control>
    </nz-form-item>
  </form>
</ng-template>
<ng-template #errorTpl let-control>
  <ng-container *ngIf="control.hasError('required')||control.hasError('notEmpty')">
    請輸入檔案夾名稱！
  </ng-container>
  <ng-container *ngIf="control.hasError('maxlength')">
    檔案夾名稱長度不能超過15！
  </ng-container>
  <ng-container *ngIf="control.hasError('pattern')">
    檔案夾名稱包含非法字符！
  </ng-container>
</ng-template>

